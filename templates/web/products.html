{% extends 'web/base.html' %}
{% load static custom_filters humanize %}

{% block content %}


{% if request.GET.query %}
<section class="bg-cover py-4">
	<div class="container-fluid">
		<div class="row align-items-center justify-content-center">
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
				<div class="text-center">
					<h5>Search</h5>
					<p class="text-dark">{{object_list|length}} Results for "{{request.GET.query}}"</p>
				</div>
			</div>
		</div>
	</div>
</section>
{% endif %}

<section class="bg-cover py-3">
	<div class="container-fluid">
		<div class="row align-items-center justify-content-center">
			<div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
				<div class="text-start">
					<h6 class="ft-medium mb-0">{{title|upper}}</h6>
				</div>
			</div>
		</div>
	</div>
</section>


<section class="py-2 br-bottom br-top">
	<div class="container-fluid">
		<div class="row align-items-center justify-content-between">
			<div class="col-xl-6 col-6">
				<div class="single_fitres mr-2 br-right">
					{{object_list|length}} Items
				</div>
			</div>

			<div class="col-xl-6 col-6">
				<div class="filter_wraps elspo_wrap d-flex align-items-center justify-content-end">
					<div class="single_fitres elspo_filte">
						<a href="#filterBox" class="simple-button px-2" data-toggle="collapse" role="button"
							aria-expanded="false" aria-controls="filterBox"><i
								class="lni lni-text-align-right mr-2"></i><span>Filter</span></a>
					</div>

				</div>
			</div>
		</div>

		<div class="row align-items-center justify-content-center">
			<div class="col-xl-12 col-lg-12 col-md-12">
				<div class="collapse" id="filterBox">
					<div class="card py-3 b-0">
						<div class="row">

							<!-- Choose Category -->
							{% for category in categories %}
							{% if category.get_subcategories and category.get_products_count > 0 %}
							<div class="col-xl-3 col-lg-3 col-md-6 col-sm-6">
								<div class="single_filter_card mb-2">
									<h5>
										<a href="{{category.get_absolute_url}}">{{category.name}}</a>
										<a href="#{{category.slug}}" data-toggle="collapse" class="collapsed"
											aria-expanded="false" role="button">
											<i class="accordion-indicator ti-angle-down"></i>
										</a>
									</h5>
									<div class="collapse show" id="{{category.slug}}"
										data-parent="#{{category.slug}}-categories">
										<div class="card-body">
											<div class="inner_widget_link">
												<ul class="m-0 p-0">
													{% for subcategory in category.get_subcategories %}
													{% if subcategory.get_productcount > 0 %}
													<li>
														<a href="{{subcategory.get_absolute_url}}">{{subcategory.name}}
															<span>{{subcategory.get_productcount}}</span>
														</a>
													</li>
													{% endif %}
													{% endfor %}
												</ul>
											</div>
										</div>
									</div>
								</div>
							</div>
							{% endif %}
							{% endfor %}

						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
</section>



<section class=" p-0">
	<div class="container-fluid">
		<!-- row -->
		<div class="row align-items-stretch">

			{% for product in object_list %}
			<div class="col-xl-2 col-lg-3 col-md-4 col-sm-4 col-6 p-1">
				{% include 'web/partials/product_card.html' %}
			</div>
			{% endfor %}

		</div>
		<!-- row -->

		{% if is_paginated %}
		<nav aria-label="Page navigation">
			<ul class="pagination justify-content-center mb-0">
				{% if page_obj.has_previous %}
				  <li class="page-item">
					<a class="btn stretched-link borders m-auto" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
					  <span aria-hidden="true">&laquo;</span>
					</a>
				  </li>
				{% endif %}
				{% for i in page_obj.paginator.page_range %}
				  {% if page_obj.number == i %}
					<li class="page-item active">
					  <span class="btn stretched-link borders m-auto">{{ i }} <span class="sr-only"></span></span>
					</li>
				  {% else %}
					<li class="page-item">
					  <a class="btn stretched-link borders m-auto" href="?page={{ i }}">{{ i }}</a>
					</li>
				  {% endif %}
				{% endfor %}
				{% if page_obj.has_next %}
				  <li class="page-item">
					<a class="btn stretched-link borders m-auto" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
					  <span aria-hidden="true">&raquo;</span>
					</a>
				  </li>
				{% endif %}
			</ul>
		</nav>
		{% endif %}

	</div>
</section>

{% endblock %}